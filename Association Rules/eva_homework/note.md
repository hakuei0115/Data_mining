# 問題詳解

1. 為何lift(提升度)那麼的高:

   * 在數據集中，有 58 萬筆交易，設置 min_support = 0.02 意味著你會找到至少在 2% 的交易中出現的頻繁項目集，這大約相當於至少 5800 筆交易中 出現的項目集。基於這個交易數量，提升度（Lift） 在 4 到 20 之間可能是合理的
   * 觀察置信度（Confidence）與支持度（Support）的數值是否合理:

   1. 置信度（Confidence）：
      * 置信度在 0.528 到 0.903 之間，這表示 Antecedent 出現時，Consequent 也出現的概率相對較高，尤其是某些規則的置信度接近 1，這表示兩者幾乎總是一起被購買。
      * 例如，規則：
      * Antecedent: PINK REGENCY TEACUP AND SAUCER
      * Consequent: GREEN REGENCY TEACUP AND SAUCER
      * 置信度為 0.822，這意味著在 82.2% 的情況下，購買粉紅茶杯的顧客會同時購買綠色茶杯。
   2. 提升度（Lift）：
      * 提升度在 18.26 到 20.74 之間，這表明這些商品之間有極強的正向關聯性。提升度超過 1，說明 Antecedent 出現時，Consequent 出現的機率比隨機出現要高很多。
      * 提升度如此之高通常表示這些商品幾乎總是一起被購買，表現出很強的互補性或搭配購買的習慣。
   3. 支持度（Support）：
      * 支持度在 0.023 到 0.028 之間，這表示這些規則適用於大約 2.3% 到 2.8% 的交易。支持度不是特別高，但仍能反映出這些規則在整體數據中的出現頻率。
        這些規則中的商品如 PINK REGENCY TEACUP AND SAUCER 和 GREEN REGENCY TEACUP AND SAUCER 可能是成對或成套銷售的商品。高置信度和高提升度表明這些商品經常一起被購買，這在某些商品之間是合理的。例如，餐具、茶杯等商品經常會被成套購買，因此置信度和提升度都很高是可以理解的。雖然支持度不算很高，但這類商品可能只在某些特定的交易中出現（例如成套購買的情況）。因此，規則的提升度和置信度都很高，而支持度相對較低仍然是合理的，因為這類商品並不會出現在所有交易中。
2. min_support為何設置0.02:

   * 在你擁有 58 萬筆交易的情況下，min_support = 0.02 是合理的選擇，因為你需要篩選出那些在至少 2% 交易中出現的規則。

# 程式碼說明

這段程式碼的目的是從一個包含零售交易數據的 Excel 文件中進行關聯規則挖掘。該過程包括以下步驟：

1. 讀取並處理交易數據。
2. 使用 apriori 演算法來識別頻繁的商品組合。
3. 根據這些頻繁項目集生成關聯規則，並過濾出提升度大於等於 1 的規則。
4. 將生成的關聯規則輸出到 CSV 文件中，供進一步分析。

### 詳細步驟：

1. 讀取數據： 使用 pandas 讀取 Excel 文件中的數據，將指定工作表中的數據載入到 DataFrame 中。為了確保後續處理中的一致性，將商品名稱（Itemname）轉換為字串格式。
2. 分組並整理交易數據： 根據 Country 和 BillNo 進行分組，每筆交易包含的商品被整合到列表中，形成交易數據。這一步可以視為將每個顧客購買的商品打包成購物籃。
3. 數據二進制編碼： 使用 TransactionEncoder 將每筆交易轉換為二進制格式，使得每筆交易成為由 0 和 1 組成的向量，表示某個商品是否出現在該交易中。
4. 發現頻繁項目集： 使用 apriori 算法找到支持度大於等於 0.02（即至少出現在 2% 的交易中）的頻繁項目集。
5. 生成關聯規則： 根據發現的頻繁項目集生成關聯規則，並使用提升度（Lift）來篩選規則，只保留提升度大於等於 1 的規則，這表示前後件之間有正向的關聯性。
6. 儲存規則： 將生成的關聯規則存儲到 CSV 文件中，便於進一步分析或應用於商業策略設計。

### 如何使用此程式碼

如果要使用codlab 直接把ipynb檔用codlab開啟並逐行執行就可以
如果要使用Viscode執行的話則需去[github](https://github.com/hakuei0115/Data_mining/tree/master/Association%20Rules)把eva_homework的所有檔案載下來(我有用資料夾命名把你們的作業都分開)，並且安裝相關的python套件，在命令提示字元中使用pip install -r requirements.txt就可以安裝所有套件，最後再執行Market_Basket_Analysis.py就可以。有疑慮可以問我。

# 一些可供參考的筆記，可用於PPT製作

假設我是老闆，我可以選擇一些提升度較高的商品組合，例如，提升度為 4 的規則表明，當顧客購買了 Antecedents(前件) 時，他們購買 Consequents(後件) 的可能性是隨機購買的 4 倍。

### 可能的商業策略

1. 交叉銷售（Cross-selling）

   * 做法：根據這些規則，可以針對商品進行交叉銷售。例如，當顧客將 HERB MARKER ROSEMARY 加入購物車時，可以推薦他們購買 HERB MARKER THYME。這可以在線上商店設置成自動推薦功能，或是在實體店內將這些商品擺放在一起，鼓勵顧客順便購買。
   * 預期效果：這種做法可以提升客單價，因為顧客更有可能購買相關商品。由於這些商品本來就經常一起被購買，因此顧客很有可能接受推薦。
2. 捆綁銷售（Bundling）

   * 做法：根據置信度和提升度高的規則，可以將經常一起被購買的商品捆綁銷售，並提供優惠價格。比如將 HERB MARKER ROSEMARY 和 HERB MARKER THYME 作為一個套餐銷售，並提供打折優惠。
   * 預期效果：這種捆綁銷售可以吸引那些原本只購買其中一個商品的顧客去購買整個套餐，從而提升銷量。
3. 產品擺放策略

   * 做法：在實體店中，經常一起被購買的商品可以擺放在一起，或者安排在顧客的購物路徑中相近的位置。例如，可以將 JAM JAR WITH PINK LID 和 JAM JAR WITH GREEN LID 擺放在同一個貨架上，這樣當顧客購買其中一個時，自然會看到並購買另一個。
   * 預期效果：這種做法可以增強即時決策購買，特別是對於那些在貨架上相鄰且互補的商品。
4. 促銷活動

   * 做法：針對經常一起購買的商品組合，設計促銷活動。例如，如果顧客購買了 REGENCY MILK JUG PINK，可以提供 REGENCY SUGAR BOWL GREEN 的折扣優惠。
   * 預期效果：這可以進一步提升這些商品的銷售量，並且通過優惠促使顧客一次性購買更多商品，從而提高收入。
5. 個性化推薦

   * 做法：對於電商網站，根據顧客的購買歷史，使用這些關聯規則進行個性化商品推薦。例如，當某個顧客購買了 SET OF 3 WOODEN TREE DECORATIONS，系統可以自動向其推薦 SET OF 3 WOODEN STOCKING DECORATION。
   * 預期效果：個性化推薦可以提升轉化率，因為它根據顧客的具體行為做出最有可能的推薦。
